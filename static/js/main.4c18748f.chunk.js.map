{"version":3,"sources":["context/WaypointsContext.js","components/map/CircleMarker.js","components/map/index.js","components/sidebar/BarsIcon.js","components/sidebar/CrossIcon.js","components/sidebar/index.js","App.js","reportWebVitals.js","index.js"],"names":["WaypointsContext","React","createContext","WaypointsContextProvider","children","useState","value","waypoints","setWaypoints","Provider","useWaypointsContext","useContext","Error","Icon","text","width","height","viewBox","className","role","cx","cy","r","fill","textAnchor","stroke","x","y","CircleMarker","position","index","icon","L","divIcon","html","ReactDOMServer","renderToString","Marker","Markers","currentNumber","length","Math","max","apply","map","item","number","useMapEvents","click","e","latlng","Polyline","pathOptions","color","positions","each","LeafletMap","MapContainer","id","center","zoom","TileLayer","url","attribution","IconBars","props","d","IconCross","xmlns","ListItem","handleDrag","handleDrop","deleteWaypoint","handleDelete","useCallback","draggable","onDragOver","ev","preventDefault","onDragStart","onDrop","onClick","Sidebar","dragId","setDragId","currentTarget","dropIndex","findIndex","parseInt","dragIndex","newWaypoints","splice","filter","waypoint","handleDownload","gpx","createGpx","activityName","startTime","Date","now","latKey","lonKey","element","document","createElement","file","Blob","type","href","URL","createObjectURL","download","body","appendChild","disabled","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4c18748f.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nconst WaypointsContext = React.createContext(null);\n\nconst WaypointsContextProvider = ({ children }) => {\n  const [waypoints, setWaypoints] = useState([]);\n\n  const value = {\n    waypoints,\n    setWaypoints,\n  }\n  return (\n    <WaypointsContext.Provider value={value}>\n      {children}\n    </WaypointsContext.Provider>\n  )\n}\n\nconst useWaypointsContext = () => {\n  const value = React.useContext(WaypointsContext);\n  if (value === null) {\n    throw new Error('`useWaypointsContext` is used outside of `WaypointsContextProvider`');\n  }\n  return value;\n};\n\nexport {\n  useWaypointsContext,\n  WaypointsContextProvider,\n};","import React from 'react';\nimport ReactDOMServer from 'react-dom/server'\nimport L from 'leaflet';\nimport { Marker } from 'react-leaflet';\n\nconst Icon = ({ text }) => {\n    return (\n      <svg width=\"40px\" height=\"40px\" viewBox=\"0 0 42 42\" className=\"circle\" role=\"img\">\n        <circle cx=\"21\" cy=\"21\" r=\"15.91549430918954\" fill=\"dimGrey\" role=\"presentation\"></circle>\n        <g className=\"circle-text\">\n          <text className=\"circle-number\" textAnchor=\"middle\" stroke=\"#fff\" x=\"50%\" y=\"60%\">\n            {text}\n          </text>\n        </g>\n      </svg>\n    );\n  }\n  \n  const CircleMarker = ({ position, index }) => {\n    const icon = L.divIcon({\n      className: 'custom-icon',\n      html: ReactDOMServer.renderToString(<Icon text={index}/>)\n    });\n    return (\n      <Marker position={position} icon={icon}/>\n    )\n  }\n\n  export default CircleMarker;\n  ","import React from 'react';\nimport { MapContainer, TileLayer, Polyline, useMapEvents } from 'react-leaflet';\nimport { useWaypointsContext } from '../../context/WaypointsContext';\nimport CircleMarker from './CircleMarker';\n\nconst Markers = () => {\n  const { waypoints, setWaypoints } = useWaypointsContext();\n  const lineOptions = { color: 'dodgerBlue' };\n\n  // get the highest number in current waypoints array or length\n  const currentNumber = waypoints.length === 0 ? waypoints.length : Math.max.apply(null, waypoints.map(item => item.number));\n  useMapEvents({\n    click(e) {\n      setWaypoints([...waypoints, { number: currentNumber + 1, position: e.latlng}]);\n    },\n  })\n  return (\n    <>\n      <Polyline pathOptions={lineOptions} positions={waypoints.map(each => each.position)} />\n      {waypoints.map(({ position, number }) => (<CircleMarker key={`marker-${number}`} position={position} index={number} />))}\n    </>\n  )\n}\n\nconst LeafletMap = () => {\n  return (\n    <MapContainer id=\"mapId\" center={[45.832672, 6.865223]} zoom={8} >\n      <TileLayer\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        attribution=\"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\">\n      </TileLayer>\n      <Markers />\n    </MapContainer>\n  )\n}\n\nexport default LeafletMap;","import React from \"react\";\n\nfunction IconBars(props) {\n  return (\n    <svg width=\"40\" height=\"40\" viewBox=\"0 0 100 80\" {...props}>\n      <path d=\"M0 0H100V20H0z\"></path>\n      <path d=\"M0 30H100V50H0z\"></path>\n      <path d=\"M0 60H100V80H0z\"></path>\n    </svg>\n  );\n}\n\nexport default IconBars;\n","import React from \"react\";\n\nfunction IconCross(props) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"40\"\n      height=\"40\"\n      viewBox=\"0 0 329.269 329\"\n      {...props}\n    >\n      <path d=\"M194.8 164.77L323.013 36.555c8.343-8.34 8.343-21.825 0-30.164-8.34-8.34-21.825-8.34-30.164 0L164.633 134.605 36.422 6.391c-8.344-8.34-21.824-8.34-30.164 0-8.344 8.34-8.344 21.824 0 30.164l128.21 128.215L6.259 292.984c-8.344 8.34-8.344 21.825 0 30.164a21.266 21.266 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25l128.21-128.214 128.216 128.214a21.273 21.273 0 0015.082 6.25c5.46 0 10.922-2.09 15.082-6.25 8.343-8.34 8.343-21.824 0-30.164zm0 0\"></path>\n    </svg>\n  );\n}\n\nexport default IconCross;","import React, { useCallback, useState } from 'react';\nimport createGpx from 'gps-to-gpx';\nimport { useWaypointsContext } from '../../context/WaypointsContext';\nimport IconBars from './BarsIcon';\nimport IconCross from './CrossIcon';\n\nconst ListItem = ({ index, handleDrag, handleDrop, deleteWaypoint }) => {\n  const handleDelete = useCallback(() => {\n    deleteWaypoint(index)\n  }, [index, deleteWaypoint]);\n  return (\n    <div className=\"sidebar-list--item-wrapper\">\n      <div\n        draggable={true}\n        id={index}\n        className=\"sidebar-list--item\"\n        onDragOver={(ev) => ev.preventDefault()}\n        onDragStart={handleDrag}\n        onDrop={handleDrop}\n      >\n        <IconBars className=\"icon icon-bars\" />\n        Waypoint {index}\n      </div>\n      <IconCross className=\"icon icon-cross\" onClick={handleDelete} />\n    </div>\n  )\n}\n\nconst Sidebar = () => {\n  const [dragId, setDragId] = useState();\n  const { waypoints, setWaypoints } = useWaypointsContext();\n\n  const handleDrag = useCallback((ev) => {\n    setDragId(ev.currentTarget.id);\n  }, [setDragId]);\n\n  const handleDrop = useCallback((ev) => {\n    const dropIndex = waypoints.findIndex(item => item.number === parseInt(ev.currentTarget.id));\n    const dragIndex = waypoints.findIndex(item => item.number === parseInt(dragId));\n\n    const newWaypoints = [...waypoints];\n    newWaypoints.splice(dropIndex, 0, newWaypoints.splice(dragIndex, 1)[0]);\n\n    setWaypoints(newWaypoints);\n  }, [waypoints, dragId, setWaypoints]);\n\n  const handleDelete = useCallback((index) => {\n    setWaypoints(waypoints.filter(waypoint => waypoint.number !== index));\n  }, [setWaypoints, waypoints])\n\n  const handleDownload = useCallback(() => {\n    const gpx = createGpx(waypoints.map(item => item.position), {\n      activityName: 'Cross country run',\n      startTime: Date.now(),\n      latKey: 'lat',\n      lonKey: 'lng',  \n    });\n\n    const element = document.createElement(\"a\");\n    const file = new Blob([gpx], {type: 'text/xml'});\n    element.href = URL.createObjectURL(file);\n    element.download = \"myRoute.gpx\";\n    document.body.appendChild(element);\n    element.click();\n  }, [waypoints])\n\n  return (\n    <>\n      <header className=\"sidebar-header\">Route builder</header>\n      <div className=\"sidebar-list\">\n        <div className=\"sidebar-list--wrapper\">\n          {waypoints.length === 0 && <span className=\"sidebar-list--no-items\">Please add waypoints on the map</span>}\n          {waypoints.map(({ number }) => <ListItem key={`list-item-${number}`} handleDrag={handleDrag} handleDrop={handleDrop} deleteWaypoint={handleDelete} index={number} />)}\n        </div>\n      </div>\n      <div className=\"sidebar-button--wrapper\">\n        <button className=\"sidebar-button\" onClick={handleDownload} disabled={waypoints.length === 0}>Download your Route</button>\n      </div>\n    </>\n  )\n}\n\nexport default Sidebar;\n","import React from 'react';\nimport LeafletMap from './components/map'\nimport './App.css';\nimport 'leaflet/dist/leaflet.css'\nimport Sidebar from './components/sidebar';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <div className=\"sidebar-container\">\n        <Sidebar />\n      </div>\n      <div className=\"map-container\">\n        <LeafletMap />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { WaypointsContextProvider } from './context/WaypointsContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <WaypointsContextProvider>\n      <App />\n    </WaypointsContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}